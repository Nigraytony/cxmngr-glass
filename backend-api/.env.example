# Backend environment variables

# MongoDB connection string (Cosmos DB for MongoDB or Atlas)
# Examples:
# mongodb+srv://<user>:<pass>@<cluster>.mongodb.net/cxmngr?retryWrites=true&w=majority
# mongodb://<username>:<password>@<host>:<port>/cxmngr?authSource=admin
MONGODB_URI=mongodb://localhost:27017/cxmngr-api

# Node server
PORT=4242

# CORS allowed origins (comma-separated). Use * to allow any origin. Prefer explicit origins in production.
# Example: https://your-swa.azurestaticapps.net,https://your-custom-domain.com
CORS_ALLOWED_ORIGINS=*

# JWT secret and other secrets (set in Azure App Service > Configuration)
JWT_SECRET=dev-only-change-me

# Stripe webhook secret etc. (optional)
# STRIPE_WEBHOOK_SECRET=
# STRIPE_SECRET_KEY=

# AI (optional)
# 32-byte encryption key used to store per-project OpenAI keys securely.
# Provide as base64(32 bytes) or 64-char hex. Example (generate):
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
AI_ENCRYPTION_KEY=
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# Google Gemini (optional server fallback; project-scoped keys can be used instead)
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-flash

# Anthropic Claude (optional server fallback; project-scoped keys can be used instead)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-sonnet-latest

# Ops kill switches (optional)
# When enabled, the API returns 503 FEATURE_DISABLED for the affected feature.
# DISABLE_AI=true
# DISABLE_UPLOADS=true
# DISABLE_EMAIL=true

# Request logging (optional)
# LOG_REQUESTS=true
# DISABLE_REQUEST_LOGS=false

# OPR Workshop (one-time paid add-on)
# Stripe price id for the add-on checkout (mode=payment)
# STRIPE_OPR_WORKSHOP_PRICE_ID=
# Voting presence window + limits (optional)
# OPR_ACTIVE_WINDOW_MINUTES=15
# OPR_MAX_ANSWERS_PER_USER=10
# OPR_DEFAULT_ANSWER_WINDOW_MINUTES=10
# OPR_DEFAULT_VOTING_WINDOW_MINUTES=10
# OPR_TOP_N=10
# DISABLE_OPR=true

# If running behind a reverse proxy (Azure, Nginx, etc.), set to true so req.ip is correct for rate limiting.
# TRUST_PROXY=true

# Documents (Azure Blob Storage)
# Files are stored in a private blob container; MongoDB stores metadata only.
# For local dev, provide an account-key connection string (must include AccountName=... and AccountKey=...).
# In Azure App Service, prefer Managed Identity and set DOCS_BLOB_ACCOUNT.
DOCS_BLOB_CONTAINER=cxmngr-docs
# DOCS_BLOB_ACCOUNT=
# AZURE_STORAGE_CONNECTION_STRING=

# Documents upload constraints (optional)
# DOCS_ALLOWED_CONTENT_TYPES=image/jpeg,image/png,image/heic,image/heif,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
# DOCS_MAX_SIZE_BYTES=26214400
